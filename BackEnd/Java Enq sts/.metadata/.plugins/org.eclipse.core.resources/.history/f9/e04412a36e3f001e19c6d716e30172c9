package com.example.repository;


import java.util.Date;
import java.util.Optional;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;

import com.example.entity.Enquiry;
import jakarta.transaction.Transactional;

@Transactional
public interface EnquriyRepository extends JpaRepository<Enquiry, Integer> {
	
	@Query(value = "select * from enquiry where Enquirer_name = :sname",nativeQuery=true)
	Optional<Enquiry> findByName(@Param("sname")String sname);	
	
	@Modifying
	@Query("update enquiry e set e.enquirer_name=:name,e.enquirer_address=:address,e.enquirer_mobile=:mobile,e.enquiry_date=:edate,e.enquirer_email_id=:email,e.enquirer_query=:equery,e.closure_reason=:creason,e.closure_reasonId,e.closure_reasonId=:clid,e.enquiry_processed_flag=:eflag,course_id=:cid,staff_id=:sid,follow_up_date=:fdate,student_name=:sname,inquiry_counter=:inc where id=:id")
	void update(@Param("name")String name,@Param("address")String enquirer_address,@Param("mobile")int duration,@Param("edate") String type,@Param("email") String email,@Param("equery") String query,@Param("creason")String closure_reason,@Param("clid")int closure_reasonId,@Param("eflag")boolean enquiry_processed_flag,@Param("cid") int course_id,@Param("sid")int staff_id,@Param("fdate") Date follow_up_date,@Param("sname") String student_name,@Param("inc") int inquiry_counter,@Param("id")int id);
	
}
